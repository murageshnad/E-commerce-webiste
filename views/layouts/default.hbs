<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Admin</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
        integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->


    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
        integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
        integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
        crossorigin="anonymous"></script>
    <style>
        /*
    DEMO STYLE
*/

        @import "https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700";

        body {
            font-family: 'Poppins', sans-serif;
            background: #fafafa;
        }

        p {
            font-family: 'Poppins', sans-serif;
            font-size: 1.1em;
            font-weight: 300;
            line-height: 1.7em;
            color: #999;
        }

        a,
        a:hover,
        a:focus {
            color: inherit;
            text-decoration: none;
            transition: all 0.3s;
        }

        .navbar {
            padding: 15px 10px;
            background: #fff;
            border: none;
            border-radius: 0;
            margin-bottom: 40px;
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        .navbar-btn {
            box-shadow: none;
            outline: none !important;
            border: none;
        }

        .line {
            width: 100%;
            height: 1px;
            border-bottom: 1px dashed #ddd;
            margin: 40px 0;
        }

        i,
        span {
            display: inline-block;
        }

        /* ---------------------------------------------------
    SIDEBAR STYLE
----------------------------------------------------- */

        .wrapper {
            display: flex;
            align-items: stretch;
        }

        #sidebar {
            min-width: 250px;
            max-width: 250px;
            background: #7386D5;
            color: #fff;
            transition: all 0.3s;
        }

        #sidebar.active {
            min-width: 80px;
            max-width: 80px;
            text-align: center;
        }

        #sidebar.active .sidebar-header h3,
        #sidebar.active .CTAs {
            display: none;
        }

        #sidebar.active .sidebar-header strong {
            display: block;
        }

        #sidebar ul li a {
            text-align: left;
        }

        #sidebar.active ul li a {
            padding: 20px 10px;
            text-align: center;
            font-size: 0.85em;
        }

        #sidebar.active ul li a i {
            margin-right: 0;
            display: block;
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        #sidebar.active ul ul a {
            padding: 10px !important;
        }

        #sidebar.active .dropdown-toggle::after {
            top: auto;
            bottom: 10px;
            right: 50%;
            -webkit-transform: translateX(50%);
            -ms-transform: translateX(50%);
            transform: translateX(50%);
        }

        #sidebar .sidebar-header {
            padding: 20px;
            background: #6d7fcc;
        }

        #sidebar .sidebar-header strong {
            display: none;
            font-size: 1.8em;
        }

        #sidebar ul.components {
            padding: 20px 0;
            border-bottom: 1px solid #47748b;
        }

        #sidebar ul li a {
            padding: 10px;
            font-size: 1.1em;
            display: block;
        }

        #sidebar ul li a:hover {
            color: #7386D5;
            background: #fff;
        }

        #sidebar ul li a i {
            margin-right: 10px;
        }

        #sidebar ul li.active>a,
        a[aria-expanded="true"] {
            color: #fff;
            background: #6d7fcc;
        }

        a[data-toggle="collapse"] {
            position: relative;
        }

        .dropdown-toggle::after {
            display: block;
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
        }

        ul ul a {
            font-size: 0.9em !important;
            padding-left: 30px !important;
            background: #6d7fcc;
        }

        ul.CTAs {
            padding: 20px;
        }

        ul.CTAs a {
            text-align: center;
            font-size: 0.9em !important;
            display: block;
            border-radius: 5px;
            margin-bottom: 5px;
        }

        a.download {
            background: #fff;
            color: #7386D5;
        }

        a.article,
        a.article:hover {
            background: #6d7fcc !important;
            color: #fff !important;
        }

        /* ---------------------------------------------------
    CONTENT STYLE
----------------------------------------------------- */

        #content {
            width: 100%;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s;
        }

        /* ---------------------------------------------------
    MEDIAQUERIES
----------------------------------------------------- */

        @media (max-width: 768px) {
            #sidebar {
                min-width: 80px;
                max-width: 80px;
                text-align: center;
                margin-left: -80px !important;
            }

            .dropdown-toggle::after {
                top: auto;
                bottom: 10px;
                right: 50%;
                -webkit-transform: translateX(50%);
                -ms-transform: translateX(50%);
                transform: translateX(50%);
            }

            #sidebar.active {
                margin-left: 0 !important;
            }

            #sidebar .sidebar-header h3,
            #sidebar .CTAs {
                display: none;
            }

            #sidebar .sidebar-header strong {
                display: block;
            }

            #sidebar ul li a {
                padding: 20px 10px;
            }

            #sidebar ul li a span {
                font-size: 0.85em;
            }

            #sidebar ul li a i {
                margin-right: 0;
                display: block;
            }

            #sidebar ul ul a {
                padding: 10px !important;
            }

            #sidebar ul li a i {
                font-size: 1.3em;
            }

            #sidebar {
                margin-left: 0;
            }

            #sidebarCollapse span {
                display: none;
            }
        }
    </style>

</head>

<body>

    <div class="wrapper">

        {{{body}}}


    </div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
        crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>
    <!-- JS dependencies -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>
    <script type="text/javascript" src="{{host}}/js/addProduct/addProduct.js"></script>


    <!-- Bootstrap 4 dependency -->


    <script type="text/javascript">
        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
            $('#addProduct').on('click', function (responseTxt, statusTxt, xhr) {
                event.preventDefault();
                jQuery.noConflict();
                $("#myModal").modal();
            });


            $('.editaddProduct').on('click', function (responseTxt, statusTxt, xhr) {
                event.preventDefault();
                jQuery.noConflict();
                $(".editModal").modal();
                let type = $(this).attr('data-type');
                console.log("type", type);
                editProduct(type);

            });
            $('.updateProducts').on('click', function (responseTxt, statusTxt, xhr) {
                event.preventDefault();
                jQuery.noConflict();
                updateProduct();

            });




            $('#addProductForm').submit(function () {
                event.preventDefault();
                jQuery.noConflict();
                //addingProdcut();
                var formData = new FormData()
                // the text data
                formData.append('title', document.getElementById('title').value)
                formData.append('price', document.getElementById('price').value)

                // since inputs allow multi files submission, therefore files are in array
                formData.append('imagePath', document.getElementById('imagePath').value)
                console.log("title", document.getElementById('title').value)
                console.log("price", document.getElementById('price').value)
                console.log("path", document.getElementById('imagePath').value)
                $.ajax({
                    method: 'POST',
                    processData: false,
                    contentType: false,
                    url: '/home/addProduct',
                    //headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    data: formData,
                    success: function (response) {
                        if (response) {
                            console.log("sucess", response);
                            window.location.reload();
                        }
                    },
                    error: function (error) {
                        console.log('something went wrong !!...');
                        console.log('error = ', error);
                    },

                });

            });
            function editProduct(type) {
                console.log("edit---", type);
                $.ajax({
                    type: 'GET',
                    url: '/home/updateProduct/' + type,
                    // dataType: "json",
                    success: function (response) {
                        if (response) {
                            console.log("data", response);
                            var editForm = $('.editProductForm');
                            var productName;

                            //editForm.html('');
                            $('.contents').html('').append(response);
                            //console.log("dd", response.productName);


                        }
                    },
                    error: function (error) {
                        console.log('something went wrong !!...');
                        console.log('error = ', error);
                    },

                });

            }



            /* $('#list').on('click', function (responseTxt, statusTxt, xhr) {
                 event.preventDefault();
                 jQuery.noConflict();
                 show();
 
             });
             function show() {
                 console.log("clicked");
                 $.ajax({
                     type: 'GET',
                     url: '/home/listProduct',
                     dataType: "json",
                     success: function (response) {
                         console.log("dat", response);
 
                         var tbodyEl = $('tbody');
 
                         tbodyEl.html('');
 
                         response.forEach(function (product) {
                             tbodyEl.append('\
                         <tr>\
                         <td class="id">' + product.unique_id + '</td>\
                         <td> product.productName ></td>\
                         <td> product.productPrice ></td>\
                         <td> product.image </td>\
                         <td>\
                         <button class="update-button">UPDATE</button>\
                         <button class="delete-button">DELETE</button>\
                         </td>\
                         </tr>\
                         ');
                         });
                     },
                     error: function () {
                     }
                 })
             }*/




            /*function addingProdcut() {
                console.log("caaled function");
                var pName = $('#productName').val();
                var pPrice = $('#productPrice').val();
                var path = $('#myimage').val();
                console.log("pName", pName);
                console.log("pPrice", pPrice);
                console.log("path", path);
                //var form_data = new FormData(document.getElementById("my-awesome-dropzone"));
                var data = new FormData(document.getElementById("addProductForm"));
                data.append('productName', document.getElementById('productName').value)
                data.append('productPrice', document.getElementById('productPrice').value)
                // since inputs allow multi files submission, therefore files are in array
                data.append('myimage', document.getElementById('myimage').files[0]);
                console.log(document.getElementById('myimage'))
                console.log(document.getElementById('myimage').files)
                console.log("data", data);
 
                $.ajax({
                    method: 'POST',
                    processData: false,
                    //contentType: false,
                    url: '/home/addProduct',
                    //headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    data: data,
                    //data: data,
                    success: function (response) {
                        if (response) {
                            console.log("sucess");
                            //window.location.reload();
                        }
                    },
                    error: function (error) {
                        console.log('something went wrong !!...');
                        console.log('error = ', error);
                    },
 
                });
            } */


            /*document.getElementById('addProductForm').onsubmit = function (event) {
                event.preventDefault() // prevent form from posting without JS
                var xhttp = new XMLHttpRequest(); // create new AJAX request
 
                /*xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("status").innerHTML = 'sent' + this.responseText + xhttp.status;
                    } else {
                        document.getElementById("status").innerHTML = xhttp.status;
                    }
                }
 
                xhttp.open("POST", "addProduct")
                var formData = new FormData()
                // the text data
                formData.append('productName', document.getElementById('productName').value)
                formData.append('productPrice', document.getElementById('productPrice').value)
 
                // since inputs allow multi files submission, therefore files are in array
                formData.append('myimage', document.getElementById('myimage').files[0])
 
 
                console.log(document.getElementById('myimage'))
                console.log(document.getElementById('myimage').files)
 
                // xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                // var data = "name=asdasdasdas&degree=MS";
                xhttp.send(formData)
                window.location.reload();
 
 
 
            }*/






        });// close main function
    </script>



</body>

</html>